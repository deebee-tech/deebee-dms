<script lang="ts">
	import { page } from "$app/state";
	import LocaleSelector from "$lib/components/global/locale-selector.svelte";
	import { globalStore } from "$lib/stores/global.svelte";
	import IsHelper from "@deebeetech/is-helper";
	import type { Snippet } from "svelte";
	import ThemeSelector from "../global/theme-selector.svelte";

	const { children }: { children: Snippet } = $props();
</script>

<div class="sticky top-0 left-0 z-[100] flex w-full items-center p-2" id="dms-system-header">
	<div class="bg-base-100 avatar mr-4 rounded-lg p-1">
		<div class="w-8">
			{#if globalStore.organizationHasCustomLogo && !IsHelper.isNullOrUndefinedOrEmptyStringOrWhitespace(globalStore.organization?.logo_url)}
				<img src={globalStore.organization?.logo_url} alt={globalStore.organization?.organization_name} />
			{:else}
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 833 833" version="1.1">
					<path
						d="M 225 37 C 225 74, 225 74, 246.973 74 C 268.947 74, 268.947 74, 288.938 97.926 C 308.930 121.852, 308.930 121.852, 328.425 110.676 C 339.148 104.529, 347.937 99.275, 347.956 99 C 347.976 98.725, 336.969 85.338, 323.496 69.251 C 299 40.002, 299 40.002, 299 20.001 C 299 0, 299 0, 262 0 C 225 0, 225 0, 225 37 M 534 20.001 C 534 40.002, 534 40.002, 509.504 69.251 C 496.031 85.338, 485.024 98.725, 485.044 99 C 485.063 99.275, 493.852 104.529, 504.575 110.676 C 524.070 121.852, 524.070 121.852, 544.062 97.926 C 564.053 74, 564.053 74, 586.027 74 C 608 74, 608 74, 608 37 C 608 0, 608 0, 571 0 C 534 0, 534 0, 534 20.001 M 154 280.901 C 74.500 326.796, 74.500 326.796, 74.254 419.648 C 74.009 512.500, 74.009 512.500, 142.892 552.250 C 180.778 574.112, 212.059 592, 212.405 592 C 212.751 592, 212.914 580.430, 212.767 566.289 C 212.500 540.579, 212.500 540.579, 165.743 513.575 C 118.986 486.571, 118.986 486.571, 119.243 419.631 C 119.500 352.690, 119.500 352.690, 176.500 319.715 C 207.850 301.578, 233.950 286.744, 234.500 286.750 C 235.050 286.756, 256.591 298.975, 282.369 313.904 C 329.238 341.047, 329.238 341.047, 351.119 328.431 C 363.154 321.493, 373 315.509, 373 315.132 C 373 314.323, 332.479 290.783, 329.528 289.878 C 327.088 289.130, 285.713 265.130, 285 264.048 C 284.303 262.992, 235.560 234.999, 234.424 235.003 C 233.916 235.005, 197.725 255.659, 154 280.901 M 573 249.164 C 559.525 256.935, 548.272 263.639, 547.994 264.061 C 547.319 265.085, 504.801 289.678, 502.909 290.139 C 500.581 290.707, 460 314.324, 460 315.111 C 460 315.499, 469.844 321.491, 481.875 328.428 C 503.749 341.039, 503.749 341.039, 550.625 313.899 C 576.406 298.972, 597.950 286.754, 598.500 286.749 C 599.050 286.744, 625.150 301.578, 656.500 319.715 C 713.500 352.690, 713.500 352.690, 713.757 419.631 C 714.014 486.571, 714.014 486.571, 667.257 513.575 C 620.500 540.579, 620.500 540.579, 620.233 566.289 C 620.086 580.430, 620.249 592, 620.595 592 C 620.941 592, 652.222 574.112, 690.108 552.250 C 758.991 512.500, 758.991 512.500, 758.746 419.644 C 758.500 326.789, 758.500 326.789, 679 280.897 C 635.275 255.656, 599.050 235.011, 598.500 235.019 C 597.950 235.027, 586.475 241.392, 573 249.164 M 338.489 591.183 C 295.595 615.960, 260.351 636.367, 260.168 636.531 C 259.986 636.695, 266.061 644.726, 273.668 654.376 C 282.896 666.082, 287.981 671.755, 288.945 671.418 C 289.740 671.140, 318.491 654.658, 352.836 634.790 C 387.181 614.922, 415.783 598.667, 416.397 598.667 C 417.011 598.667, 445.635 614.913, 480.006 634.770 C 514.378 654.626, 543.175 671.109, 544 671.398 C 545.037 671.760, 549.773 666.502, 559.332 654.376 C 566.939 644.726, 573.014 636.694, 572.832 636.527 C 572.649 636.361, 538.750 616.773, 497.500 592.999 C 456.250 569.225, 421.145 548.955, 419.489 547.954 C 416.479 546.133, 416.479 546.133, 338.489 591.183 M 391.500 752.570 C 378.300 760.569, 366.886 767.473, 366.135 767.911 C 365.124 768.501, 371.344 777.021, 390.135 800.783 C 404.086 818.425, 415.798 832.890, 416.162 832.929 C 416.526 832.968, 428.369 818.551, 442.479 800.891 C 465.793 771.710, 467.967 768.670, 466.317 767.556 C 461.094 764.031, 417.066 738.002, 416.345 738.012 C 415.880 738.019, 404.700 744.570, 391.500 752.570"
						stroke="none"
						fill="var(--color-primary)"
						fill-rule="evenodd"
					/>
					<path
						d="M 351.255 125.863 C 286.044 163.500, 286.044 163.500, 285.772 214.167 C 285.500 264.834, 285.500 264.834, 307.206 277.417 C 319.145 284.338, 329.158 290, 329.456 290 C 329.755 290, 330.004 267.387, 330.009 239.750 C 330.017 189.500, 330.017 189.500, 372.894 164.750 C 396.476 151.137, 416.099 140, 416.501 140 C 416.902 140, 436.527 151.137, 460.110 164.750 C 502.990 189.500, 502.990 189.500, 502.995 239.750 C 502.998 267.387, 503.221 290, 503.492 290 C 503.763 290, 513.775 284.341, 525.742 277.424 C 547.500 264.848, 547.500 264.848, 547.223 214.174 C 546.947 163.500, 546.947 163.500, 486.312 128.500 C 452.963 109.250, 423.605 92.313, 421.072 90.863 C 416.467 88.226, 416.467 88.226, 351.255 125.863 M 372.288 363.756 C 350.076 376.500, 350.076 376.500, 349.998 431.500 C 349.921 486.500, 349.921 486.500, 302.963 513.500 C 256.005 540.500, 256.005 540.500, 256.003 566.323 C 256.001 586.961, 256.260 592.082, 257.295 591.823 C 258.007 591.645, 289.282 573.769, 326.795 552.099 C 395 512.697, 395 512.697, 395 431.849 C 395 387.382, 394.887 351.003, 394.750 351.006 C 394.613 351.010, 384.504 356.747, 372.288 363.756 M 438 431.757 C 438 512.697, 438 512.697, 506.205 552.099 C 543.718 573.769, 574.993 591.645, 575.705 591.823 C 576.740 592.082, 576.999 586.961, 576.997 566.323 C 576.995 540.500, 576.995 540.500, 530.037 513.500 C 483.079 486.500, 483.079 486.500, 483.019 431.500 C 482.952 370.987, 486.810 378.609, 443.868 354.159 C 438 350.818, 438 350.818, 438 431.757 M 364.500 672.537 C 336.450 688.761, 313.358 702.455, 313.184 702.967 C 313.010 703.479, 319.006 711.615, 326.508 721.046 C 336.373 733.447, 340.613 738.068, 341.824 737.737 C 342.746 737.486, 359.861 727.777, 379.857 716.162 C 411.998 697.493, 416.462 695.176, 418.357 696.186 C 419.536 696.813, 436.368 706.479, 455.762 717.664 C 475.156 728.849, 491.457 738, 491.986 738 C 493.063 738, 520 704.479, 520 703.138 C 520 702.256, 417.783 642.985, 416.319 643.019 C 415.869 643.029, 392.550 656.312, 364.500 672.537"
						stroke="none"
						fill="var(--color-base-content)"
						fill-rule="evenodd"
					/>
				</svg>
			{/if}
		</div>
	</div>
	<div class="text-accent-content text-center text-lg font-bold">DeeBee DMS</div>
	<div class="text-accent-content mr-3 ml-3 text-center text-lg font-bold">|</div>
	<div class="text-accent-content text-center text-lg font-bold">
		{page.data.title}
	</div>
	<div class="ml-auto flex gap-2">
		<div>
			<LocaleSelector />
		</div>
		<div>
			<ThemeSelector />
		</div>
	</div>
</div>
<div class="mt-10 p-2">
	<div class="m-auto flex w-11/12 items-center justify-center md:w-2/3 lg:w-1/2 xl:w-1/3">
		<div class="flex w-full flex-col">
			{@render children?.()}
		</div>
	</div>
</div>

<style>
	#dms-system-header {
		background: linear-gradient(130deg, var(--color-accent) 15rem, var(--color-base-100) calc(80%));
	}
</style>
